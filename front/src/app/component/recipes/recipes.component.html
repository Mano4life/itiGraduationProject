<section class="mt-5 w-100">
    <app-top-dish-area title="All recipes"></app-top-dish-area>
</section>
<section class="mt-3 mb-3  category">
  <div class="row d-flex justify-content-center align-items-center smaller-div">
      <div class="col-lg-1 p-3 col-md-2 col-sm-4 col-9 background   ms-3 small-div d-flex flex-column justify-content-center align-items-center" (click)="toggleCategory('breakfast')" [class.selected]="isCategorySelected('breakfast')"  >

          <img src="assets/imgs/croissant.png" alt="Breakfast" class="img-fluid">
          <p href="#" class="text-decoration-none fs-5 color p-1 m-1 align-middle">Breakfast</p>
      </div>
      <div class="col-lg-1 col-md-2 p-3   col-sm-4 col-9 background   ms-3 small-div d-flex flex-column justify-content-center align-items-center" (click)="toggleCategory('lunch')" [class.selected]="isCategorySelected('lunch')" >
          <img src="assets/imgs/salad.png" alt="Lunch" class="img-fluid">
          <p href="#" class="text-decoration-none fs-5 color p-1 m-1 align-middle">Lunch</p>
      </div>
      <div class="col-lg-1 col-md-2 p-3 col-sm-4 col-9 background   ms-3 small-div d-flex flex-column justify-content-center align-items-center" (click)="toggleCategory('dinner')" [class.selected]="isCategorySelected('dinner')"  >

          <img src="assets/imgs/dinner.png" alt="Dinner" class="img-fluid">
          <p href="#" class="text-decoration-none fs-5 color p-1 m-1 align-middle">Dinner</p>
      </div>
      <div class="col-lg-1 col-md-2 p-3  col-sm-4 col-9 background   ms-3 small-div d-flex flex-column justify-content-center align-items-center" (click)="toggleCategory('dessert')" [class.selected]="isCategorySelected('dessert')"  >

        <img src="assets/imgs/cupcake.png" alt="Dinner" class="img-fluid">
        <p href="#" class="text-decoration-none fs-5 color p-1 m-1 align-middle">Dessert</p>
    </div>
  </div>
</section>
<section >
    <div class="d-flex justify-content-center sm-div sub_category m-auto row">
        <div class="col-lg-2 col-md-3 col-sm-10  sm-div mt-2 ">
            <div class="dropdown d-flex flex-column" >
                <button (click)="toggleDropdown()" class="btn pink-btn  d-block darkbutton">SubCategory 
                    <img src="assets/imgs/filter-svgrepo-com.svg" alt="" class="d-inline-block" >
                    
                </button>
                
            </div>
              
            
        </div>
        <div class=" col-lg-2 col-md-3 col-sm-10  sm-div mt-2 ">
            <div class="dropdown d-flex flex-column">
                <button (click)="toggleDropdown2()" class="btn pink-btn">Ingredients
                    <img src="assets/imgs/filter-svgrepo-com.svg" alt="" class="d-inline-block">
                </button>
                
            </div>
              
              
        </div>
        <div class=" col-lg-2 col-md-3 col-sm-10  sm-div mt-2">
            <div class="dropdown d-flex flex-column">
                <button (click)="toggleDropdown3()" class="btn pink-btn  d-block">Time
                    <img src="assets/imgs/clock-two-svgrepo-com.svg" alt="" class="d-inline-block">
                    
                </button>
                
            </div>
        </div>
    </div>
</section>
<section class="mt-3 m-auto">
  <div class="row m-auto">
    <div class="col-lg-8 m-auto">
      <div class="dropdown-content" *ngIf="dropdownOpen">
        <div class="checkbox-container">
          <div *ngFor="let option of filteredSubCategory()" class="background  m-1 px-2 ">
            <label>
              <input type="checkbox" [checked]="option.selected" (change)="toggleOption(option)" />
              {{ option.name }}
            </label>
          </div>
        </div>
      </div>
      <div class="dropdown-content" *ngIf="dropdown3Open">
        <div class="checkbox-container ">
          <div *ngFor="let option of time" class="background m-1 px-2 ">
            <label>
              <input type="checkbox" [checked]="option.selected" (change)="toggleOption3(option)" />
              {{ option.name }}
            </label>
          </div>
        </div>
      </div>
      <div class="dropdown-content" *ngIf="dropdown2Open">
        <div class="checkbox-container">
          <div *ngFor="let option of filteredingredents()" class="background  m-1 px-2 ">
            <label>
              <input type="checkbox" [checked]="option.selected" (change)="toggleOption2(option)" />
              {{ option.name }}
            </label>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<section>
  <div class="container d-flex flex-column w-80">
    <div class="row gx-3 mt-3">
      <div class="col-lg-3 col-md-6 col-sm-12 position-relative"  *ngFor="let item of getFilteredRecipes() | paginate: { itemsPerPage: 20, currentPage: p } ; let i = index" 
      (click)="item.user?.role === 'premium' &&  !isPremiumUser() ? premiumRecipeClick() : SingleRecipePage(item.id)"
      
      >
        <div class="imagehover">
          <img class="rounded-image object-fit-cover" style="width: 100% !important; height: 330px !important;" [src]="item.image" alt="food">
          <span class="badge position-absolute top-0 start-0 ms-3 mt-2" *ngIf="item.user?.role === 'premium'"><i class="fa-solid fa-crown pb-1" ></i></span>
        </div>
        <div class="d-flex justify-content-between mt-2">
          <span class="red m-0">{{item.category.name}}</span>
          <div class="d-flex  flex-row align-items-center " style=" color: var(--main-color);">

            <i class="fa-regular fa-clock h6" ></i>

            <span class="inline-block px-2 h6" >{{item.time}} mins</span>
          </div>
        </div>
        <div class="mb-3">
          <h5>{{item.name}}</h5>
        </div>
      </div>
    </div>
    <div class=" d-flex justify-content-center flex-column align-items-center"
     *ngIf="getFilteredRecipes().length==0" >
      <div class="p-3">
        <h3 class="text-center text-secondary">
          No Result Found with this Filter !!

        </h3>
      </div>
    </div>
    <div class="d-flex justify-content-center my-4">

      <pagination-controls (pageChange)="p = $event"></pagination-controls>
    </div>
  </div>
</section>
